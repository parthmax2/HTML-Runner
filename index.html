<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HTML Runner</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4bf;--accent:#7c5cff}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#07102a 0%, #0f1724 100%);color:#eef2ff}
    header{display:flex;align-items:center;gap:12px;padding:18px 22px;flex-wrap:wrap}
    h1{font-size:1.6rem;margin:0}
    .container{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding:18px;min-height:calc(100vh - 150px)}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:12px;border-radius:12px;display:flex;flex-direction:column;min-height:320px}
    label{display:block;font-size:0.8rem;color:var(--muted);margin-bottom:8px}
    textarea{width:100%;flex:1;resize:vertical;background:transparent;border:1px dashed rgba(255,255,255,0.04);color:inherit;padding:12px;border-radius:8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;font-size:0.9rem;min-height:200px}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;align-items:center}
    button{background:var(--accent);border:none;color:white;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;transition:background 0.3s}
    button:hover{background:#6a4ce0}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .small{padding:6px 8px;font-size:0.9rem}
    iframe{width:100%;height:100%;border-radius:10px;border:1px solid rgba(0,0,0,0.2);background:white;flex:1}
    .footer{padding:16px 18px;color:var(--muted);font-size:0.9rem;text-align:center;border-top:1px solid rgba(255,255,255,0.04)}
    .top-actions{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
    .hint{font-size:0.85rem;color:var(--muted)}
    @media(max-width:900px){.container{grid-template-columns:1fr;}.top-actions{margin-left:0}}
  </style>
</head>
<body>
  <header>
    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M3 6h18M3 12h18M3 18h18" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    <h1>HTML Runner</h1>
    <div class="top-actions">
      <button id="download" class="small">Download .html</button>
      <button id="clear" class="small ghost">Clear</button>
      <button id="fullscreen" class="small ghost">Full Screen</button>
      <select id="device" class="small ghost">
        <option value="100%">Desktop</option>
        <option value="414">Mobile (iPhone)</option>
        <option value="768">Tablet</option>
        <option value="1366">Laptop</option>
      </select>
    </div>
  </header>

  <div class="container">
    <section class="panel">
      <label for="source">Paste your HTML (you can include &lt;style&gt; and &lt;script&gt;)</label>
      <textarea id="source" spellcheck="false"></textarea>

      <div class="controls">
        <button id="preview">Preview (Ctrl/Cmd+Enter)</button>
        <button id="live" class="ghost small">Live: Off</button>
        <input id="file" type="file" accept=".html,text/html" class="ghost small" style="display:none"/>
        <button id="openFile" class="small ghost">Open .html</button>
        <div style="flex:1"></div>
        <span class="hint">Use sandboxed preview for safe rendering.</span>
      </div>
    </section>

    <section class="panel">
      <label>Preview</label>
      <div style="flex:1;display:flex;justify-content:center;align-items:center;overflow:hidden">
        <iframe id="previewFrame" sandbox="allow-forms allow-scripts allow-same-origin" title="HTML preview"></iframe>
      </div>
      <div style="height:12px"></div>
      <div class="hint">Adjust screen size or go fullscreen for better testing.</div>
    </section>
  </div>

  <div class="footer">Built by <strong>Parthmax</strong> · © 2025 HTML Runner · Fully responsive for all devices</div>

  <script>
    const source = document.getElementById('source');
    const preview = document.getElementById('preview');
    const iframe = document.getElementById('previewFrame');
    const liveBtn = document.getElementById('live');
    const clearBtn = document.getElementById('clear');
    const downloadBtn = document.getElementById('download');
    const fullscreenBtn = document.getElementById('fullscreen');
    const deviceSelect = document.getElementById('device');
    const fileInput = document.getElementById('file');
    const openFileBtn = document.getElementById('openFile');

    const STORAGE_KEY = 'html-runner:content';
    if(localStorage.getItem(STORAGE_KEY)) source.value = localStorage.getItem(STORAGE_KEY);

    let live = false;
    let debounceTimer = null;

    function updatePreview(){
      iframe.srcdoc = source.value;
    }

    preview.addEventListener('click', updatePreview);

    liveBtn.addEventListener('click', ()=>{
      live = !live;
      liveBtn.textContent = live ? 'Live: On' : 'Live: Off';
      liveBtn.classList.toggle('ghost', !live);
      if(live) updatePreview();
    });

    source.addEventListener('input', ()=>{
      try{localStorage.setItem(STORAGE_KEY, source.value)}catch(e){}
      if(live){clearTimeout(debounceTimer);debounceTimer=setTimeout(updatePreview,350);}
    });

    source.addEventListener('keydown',(e)=>{
      if((e.ctrlKey||e.metaKey)&&e.key==='Enter'){e.preventDefault();updatePreview();}
    });

    clearBtn.addEventListener('click', ()=>{
      if(confirm('Clear editor?')){source.value='';localStorage.removeItem(STORAGE_KEY);if(live)updatePreview();}
    });

    downloadBtn.addEventListener('click', ()=>{
      const blob = new Blob([source.value], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'html-runner.html'; document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 2000);
    });

    openFileBtn.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', async (e)=>{
      const f = e.target.files[0];
      if(!f) return;
      const text = await f.text();
      source.value = text;
      localStorage.setItem(STORAGE_KEY, text);
      if(live) updatePreview();
    });

    fullscreenBtn.addEventListener('click', ()=>{
      if(!document.fullscreenElement){document.documentElement.requestFullscreen();}
      else{document.exitFullscreen();}
    });

    deviceSelect.addEventListener('change', ()=>{
      const val=deviceSelect.value;
      iframe.style.width=val==='100%'?'100%':val+'px';
    });

    updatePreview();
  </script>
</body>
</html>
